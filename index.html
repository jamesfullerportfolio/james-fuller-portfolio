<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>James Fuller Portfolio</title>
  <meta name="description" content="A clean, lightweight portfolio to showcase images and videos." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Tailwind (CDN for now; swap to compiled styles.css later) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Favicon (prevents 404) -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ¨</text></svg>">

  <style>
    :root { --bg: #0b0b0c; --fg: #f5f7fa; }
    html { background: var(--bg); color: var(--fg); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    .masonry { column-count: 1; column-gap: 1rem; }
    @media (min-width: 640px) { .masonry { column-count: 2; } }
    @media (min-width: 1024px) { .masonry { column-count: 3; } }
    .brick { break-inside: avoid; margin-bottom: 1rem; }
  </style>
</head>
<body class="bg-[var(--bg)] text-[var(--fg)] selection:bg-white/20">
  <header class="max-w-6xl mx-auto px-4 sm:px-6 py-10">
    <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-6">
      <div>
        <h1 class="text-3xl sm:text-4xl font-bold tracking-tight">James Fuller</h1>
        <p class="text-sm sm:text-base text-white/70 mt-2">
          Location Â· Mediums Â· Contact:
          <a class="underline hover:opacity-80" href="mailto:jamesfullerportfolio@gmail.com">jamesfullerportfolio@gmail.com</a>
        </p>
      </div>
      <nav class="flex gap-2 flex-wrap">
        <button data-filter="all" class="filter-btn px-3 py-1.5 rounded-2xl bg-white/10 hover:bg-white/20 text-sm">All</button>
        <button data-filter="image" class="filter-btn px-3 py-1.5 rounded-2xl bg-white/10 hover:bg-white/20 text-sm">Images</button>
        <button data-filter="video" class="filter-btn px-3 py-1.5 rounded-2xl bg-white/10 hover:bg-white/20 text-sm">Videos</button>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 sm:px-6 pb-24">
    <!-- Helpers + DATA -->
    <script>
      // Sized image helper (thumbs + lightbox from the same Drive file ID)
      const driveUrlSized = (id, w) => `https://lh3.googleusercontent.com/d/${id}=w${w}`;
      // Original download link (uses same ID)
      const driveDownloadUrl = (id) => `https://drive.google.com/uc?export=download&id=${id}`;

      // Only driveId is needed now. A Download button will show for every Drive image automatically.
      const artworks = [
        { type: 'image', driveId: '1Tpi8bcAFylpFEyfMTBiaYIM-Y8OT1ozy', title: "Ganderâ€™spatch XElectric Armchair", alt: 'Album cover' },
        { type: 'image', driveId: '1vCjOO0ywYTuEX63CnEl3tXzZ0_P_q6qL', title: "ect", alt: 'Album cover' },
        { type: 'image', driveId: '11vG5yWv666muidxNvbUvT4VEA2e7Rqk5', title: "ect", alt: 'Album cover' },
        { type: 'image', driveId: '1fzXNwzKak2D8niqxecj1OXm63jgHcbvB', title: "ect", alt: 'Album cover' },
        // Examples:
        // { type: 'youtube', id: 'YOUTUBE_VIDEO_ID', title: 'Process Reel' },
        // { type: 'video', src: 'assets/clip.mp4', title: 'Short Clip (local, small only)' },
      ];
    </script>

    <div id="gallery" class="masonry"></div>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="fixed inset-0 bg-black/80 hidden items-center justify-center p-4 z-50">
      <button id="closeLightbox" class="absolute top-4 right-4 px-3 py-1.5 rounded-xl bg-white/10 hover:bg-white/20">Close</button>
      <div id="lightboxContent" class="w-full max-w-5xl"></div>
    </div>
  </main>

  <footer class="max-w-6xl mx-auto px-4 sm:px-6 pb-10 text-xs text-white/50">
    <p>Â© <span id="year"></span> James Fuller. All rights reserved.</p>
  </footer>

  <!-- RENDER -->
  <script>
    const gallery = document.getElementById('gallery');

    function cardWrapper(inner) {
      return `
<div class="brick">
  <div class="group relative rounded-2xl overflow-hidden shadow-2xl shadow-black/30 bg-white/5 border border-white/10">
    ${inner}
    <div class="absolute inset-0 ring-1 ring-white/10 pointer-events-none rounded-2xl"></div>
  </div>
</div>`;
    }

    function imageCard(item) {
      const hasDrive = Boolean(item.driveId);
      const id = item.driveId;

      // Responsive thumbnails in grid
      const src = hasDrive ? driveUrlSized(id, 800) : item.src;
      const srcset = hasDrive
        ? [
            `${driveUrlSized(id, 800)} 800w`,
            `${driveUrlSized(id, 1200)} 1200w`,
            `${driveUrlSized(id, 1600)} 1600w`
          ].join(', ')
        : '';
      const sizes = '(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw';

      // Always show download for Drive images
      const downloadBtn = hasDrive
        ? `<a href="${driveDownloadUrl(id)}" class="inline-block text-xs px-2 py-1 rounded-lg bg-white/10 hover:bg-white/20 ml-2" target="_blank" rel="noopener">Download full-res</a>`
        : '';

      const caption = item.title
        ? `<div class="p-3 text-sm text-white/80 flex items-center">${item.title}${downloadBtn}</div>`
        : (downloadBtn ? `<div class="p-3">${downloadBtn}</div>` : '');

      // Store ID for lightbox; fallback to src if local
      const lbData = hasDrive ? `data-id="${id}"` : `data-src="${item.src}"`;

      return cardWrapper(`
        <button class="block w-full text-left" data-lightbox="image" ${lbData} data-title="${item.title||''}">
          <img
            src="${src}"
            ${hasDrive ? `srcset="${srcset}" sizes="${sizes}"` : ''}
            alt="${item.alt||item.title||'Artwork'}"
            loading="lazy"
            class="w-full h-auto block group-hover:opacity-90 transition" />
        </button>
        ${caption}
      `);
    }

    function youtubeCard(item) {
      const thumb = `https://img.youtube.com/vi/${item.id}/hqdefault.jpg`;
      const caption = item.title ? `<div class="p-3 text-sm text-white/80">${item.title}</div>` : '';
      return cardWrapper(`
        <button class="block w-full text-left" data-lightbox="youtube" data-id="${item.id}" data-title="${item.title||''}">
          <img src="${thumb}" alt="${item.title||'Video'}" loading="lazy" class="w-full h-auto block group-hover:opacity-90 transition" />
          <span class="absolute inset-0 grid place-items-center">
            <span class="inline-flex items-center justify-center rounded-full w-14 h-14 bg-black/60 backdrop-blur">â–¶</span>
          </span>
        </button>
        ${caption}
      `);
    }

    function mp4Card(item) {
      const caption = item.title ? `<div class="p-3 text-sm text-white/80">${item.title}</div>` : '';
      return cardWrapper(`
        <button class="block w-full text-left" data-lightbox="video" data-src="${item.src}" data-title="${item.title||''}">
          <video src="${item.src}#t=0.1" class="w-full h-auto block" muted playsinline></video>
        </button>
        ${caption}
      `);
    }

    // Build gallery
    const frags = artworks.map(item => {
      if (item.type === 'image') return imageCard(item);
      if (item.type === 'youtube') return youtubeCard(item);
      if (item.type === 'video') return mp4Card(item);
      return '';
    }).join('');
    gallery.innerHTML = frags;

    // Lightbox behavior
    const lightbox = document.getElementById('lightbox');
    const lightboxContent = document.getElementById('lightboxContent');
    const closeBtn = document.getElementById('closeLightbox');

    gallery.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-lightbox]');
      if (!btn) return;
      const kind = btn.getAttribute('data-lightbox');
      lightboxContent.innerHTML = '';

      if (kind === 'image') {
        const id = btn.getAttribute('data-id');
        const title = btn.getAttribute('data-title') || '';

        if (id) {
          // Larger image inside modal
          const large = driveUrlSized(id, 2000);
          lightboxContent.innerHTML = `<img src="${large}" alt="${title}" class="w-full h-auto rounded-xl" />`;
        } else {
          const src = btn.getAttribute('data-src');
          lightboxContent.innerHTML = `<img src="${src}" alt="${title}" class="w-full h-auto rounded-xl" />`;
        }
      }

      if (kind === 'youtube') {
        const vid = btn.getAttribute('data-id');
        const title = btn.getAttribute('data-title') || '';
        lightboxContent.innerHTML = `
          <div class="relative w-full" style="padding-top: 56.25%">
            <iframe class="absolute inset-0 w-full h-full rounded-xl"
              src="https://www.youtube.com/embed/${vid}?autoplay=1"
              title="${title}"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen></iframe>
          </div>`;
      }

      if (kind === 'video') {
        const src = btn.getAttribute('data-src');
        const title = btn.getAttribute('data-title') || '';
        lightboxContent.innerHTML = `<video src="${src}" class="w-full h-auto rounded-xl" controls autoplay playsinline></video>`;
      }

      lightbox.classList.remove('hidden');
      lightbox.classList.add('flex');
    });

    closeBtn.addEventListener('click', () => {
      lightbox.classList.add('hidden');
      lightbox.classList.remove('flex');
      lightboxContent.innerHTML = '';
    });
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeBtn.click();
    });

    // Filters
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const filter = btn.dataset.filter;
        const children = Array.from(gallery.children);
        children.forEach((el, i) => {
          const t = artworks[i].type;
          el.style.display = (filter === 'all' || t === filter) ? '' : 'none';
        });
      });
    });

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
